import { tonePromise } from './InitTone'

type SfxControl = {
  playImpactSound: () => void;
  playExplosionSound: () => void;
}

let setSfxControl: (sfxControl: SfxControl) => void;
let sfxControlPromise = new Promise<SfxControl>(resolve => { setSfxControl = resolve; });

tonePromise.then((Tone) => {
  const impactSound = new Tone.Player().toDestination();
  const impactSoundLoaded = impactSound.load("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU5LjI3LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAADAAAEyQCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKjq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6ur///////////////////////////////////////////8AAAAATGF2YzU5LjM3AAAAAAAAAAAAAAAAJAWOAAAAAAAABMnvnGA2AAAAAAD/+7DEAAAFdAN7tAAAKgmY7v8zgAiEHdpO2yagAVh4fuOfHDwwAABGA///Mf/8D/+OGAAB//////8APDw8PDAAQpgZCZsrO8C6H+/n9AAAAANQyFcCqizUmk8sHzbuwtbyjE27jSQmpSa/4deliRrEoEoG4U9Fow5lJOPbNNccpTCD8ZBJXVd1ptK5K73UhErqO1EovMyWH4tTwNGZiGJXA9yTw/IYLyoItyOYXJA39eET+6KdrUk7lanZt3ZqbgG7G6NyBSbxxKFNt9UAAA4xfOKTDelE95EMyfzVo4xw9ASabCHiQuYwTmjBZpqGaEPmNBQGTDFBIQhIJDNdgdUC0Yl6GZgBwGBKDiEwBDO0oCDAxZMwQOrDrEYKgNRiTYLUMOgcuQg8nym7ADYWssoQDsDYAqhHaJlC2WJsHUoa9DLuKoyBG1KpB6HWbP00uVsXfhm7AX6X7clTLexWB2mSHKR5RaBL9yw/6gwmsO0MCuDsF4jBAAAAAB3XgwGPNerZrumGJXNaIShkJIpg3diUnWjW/9prrwCz2XRH/97ZS7K5mU1rdj//4xcjUcmqWlfaIyH///pbdeU0N0GXeVLKTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7cMTXgBTMx0+ZvIABWpCrPzOAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xDE1gPAAAH+HAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==");
  const explosionSound = new Tone.Player().toDestination();
  const explosionSoundLoaded = explosionSound.load("data:audio/mpeg;base64,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");

  setSfxControl({
    playImpactSound: () => impactSoundLoaded.then(() => impactSound.start()),
    playExplosionSound: () => explosionSoundLoaded.then(() => explosionSound.start())
  });
});

export { sfxControlPromise };